<!--output widget with pagination control-->
<!--Note: This widget assumes the output is a list of dictionary with exactly one entry, where the key
<!--      of the entry is the original input and value of the entry is a list of outputs generated from that input.-->

<!--pagination control-->
<script>
    var current_active_page = 1;
    function showPage(pageNum) {
        document.getElementById("page-" + current_active_page).style.display = "none";
        document.getElementById("page-" + pageNum).style.display = "block";
        current_active_page = pageNum;
    }
</script>

{% if outputs %}
    <!--tool bar-->
    <div id="tool-bar" class="row valign-wrapper container">
        <!--pagination control-->
        {% if outputs|length > 1 %}
            <div id="pagination" class="col s8"></div>
            <style>
                .pagination li.active {
                    background-color: #26a69a
                }
            </style>
            <script>
                $('#pagination').materializePagination({
                    align: 'left',
                    firstPage: 1,
                    lastPage: {{ outputs|length }},
                    useUrlParameter: false,
                    onClickCallback: function(requestedPage){showPage(requestedPage);}
                });
            </script>
        {% endif %}
    </div>

    {% for result in outputs %}
        {% for input, values in result.items %}
            {% if values %}
                {% if forloop.parentloop.counter == 1 %}
                    <ul id="page-1" class="collection with-header container">
                {% else %}
                    <ul id="page-{{ forloop.parentloop.counter }}" class="collection with-header container" style="display: none">
                {% endif %}

                    <li id="page-header-{{ forloop.parentloop.counter }}" class="collection-header"><h6>{{ success_msg }} '<b>{{ input }}</b>':</h6></li>
                    <div id="page-content-{{ forloop.parentloop.counter }}">
                        {% for value in values %}
                            <li class="collection-item"><div>{{ forloop.counter }}. {{ value|safe }}</div></li>
                        {% endfor %}
                    </div>
                </ul>
            {% else %}
                {% if forloop.parentloop.counter == 1 %}
                    <ul id="page-1" class="collection with-header container">
                {% else %}
                    <ul id="page-{{ forloop.parentloop.counter }}" class="collection with-header container" style="display: none">
                {% endif %}
                    <li id="page-header-{{ forloop.parentloop.counter }}" class="collection-header"><h6>{{ failure_msg }} (input: '<b>{{ input }}</b>')</h6></li>
                    <div id="page-content-{{ forloop.parentloop.counter }}"></div>
                </ul>
            {% endif %}
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    if (content_height == null) {
                        bottom = document.getElementById("page-header-1").getBoundingClientRect().bottom;
                        var content_height = (window.innerHeight - bottom  - 60) + "px";
                    }
                    var page_content = document.getElementById("page-content-{{ forloop.parentloop.counter }}");
                    page_content.style.height = content_height;
                    page_content.style.overflowY = "scroll";
                });
            </script>
        {% endfor %}
    {% endfor %}
{% endif %}
